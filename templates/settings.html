{% extends "_layouts/cp" %}

{% import "_includes/forms" as forms %}

{% set title = "Shield"|t %}

{% set crumbs = [
{ label: "Shield"|t, url: url('shield') }
] %}

{% set cpPath = craft.shield.getCpTrigger %}

{% if not currentUser.admin %}
{% exit 404 %}
{% endif %}

{% block content %}

<form id="settings-form" method="post" class="centered" accept-charset="UTF-8" data-saveshortcut>
    <input type="hidden" name="action" value="shield/save">
    {{ getCsrfInput() }}

    {{ forms.textField({
    label: 'Username'|t,
    name: 'name',
    size: 16,
    value: settings.name ? settings.name : '',
    instructions: ''|t
    }) }}

    {{ forms.textField({
    label: 'Password'|t,
    name: 'pass',
    size: 16,
    value: settings.pass ? settings.pass : '',
    instructions: ''|t
    }) }}

	{{ forms.lightswitchField({
    label: 'Sitewide'|t,
    instructions: 'Enable if you want the entire site protecting by this shield.'|t,
    name: 'enabled_sitewide',
    on: settings.enabled_sitewide,
    }) }}

    {{ forms.lightswitchField({
    label: 'Control Panel'|t,
    instructions: 'Enable if you want the Control Panel protected by this shield at /' ~ cpPath ~ '.',
    name: 'enabled_cp',
    on: settings.enabled_cp,
    }) }}

    {{ forms.textareaField({
    label: "Paths"|t,
    name: 'paths',
    instructions: "Shield protection can be added to specific parts of your site by adding their paths here. Enter one path per line. The * character is a wildcard. Example paths are blog for the blog page and blog/* for every personal blog. / is the homepage."|t,
    rows: 10,
    value: settings.paths,
    }) }}

    {{ forms.textField({
    label: "Text"|t,
    name: 'text_unauthorised',
    instructions: "Text to display whensomebody cancels the authentication dialog."|t,
    value: settings.text_unauthorised,
    }) }}

    <hr>

    <div class="buttons">
        <input type="submit" class="btn submit" value="{{ 'Save'|t }}">
    </div>
</form>

{% endblock %}